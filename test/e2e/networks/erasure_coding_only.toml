# E2E test manifest for Reed-Solomon erasure coding only (without fast gossip)
# This tests that erasure coding and block reconstruction work correctly

initial_height = 1
evidence = 0
abci_protocol = "builtin"

# Add delays to simulate realistic application processing
prepare_proposal_delay = "50ms"
process_proposal_delay = "50ms"
check_tx_delay = "10ms"

# Enable only erasure coding (no fast gossip)
block_part_encoding = "reed_solomon"
fast_block_gossip = false

# Large block size to ensure multiple parts are needed
block_max_bytes = 2000000

# Transaction load configuration - creates large blocks
load_tx_size_bytes = 10240
load_tx_batch_size = 10
load_tx_connections = 1
load_max_txs = 100

# Enable metrics for observability
prometheus = true

# Three validators for consensus
[validators]
validator01 = 100
validator02 = 100
validator03 = 100

# Validator nodes with erasure coding only
[node.validator01]
mode = "validator"
database = "goleveldb"
privval_protocol = "file"
persist_interval = 1
snapshot_interval = 5
retain_blocks = 0
perturb = []

[node.validator02]
mode = "validator"
database = "goleveldb"
privval_protocol = "file"
persist_interval = 1
snapshot_interval = 5
retain_blocks = 0
perturb = []
persistent_peers = ["validator01"]

[node.validator03]
mode = "validator"
database = "goleveldb"
privval_protocol = "file"
persist_interval = 1
snapshot_interval = 5
retain_blocks = 0
perturb = []
persistent_peers = ["validator01", "validator02"]

# Full node to verify block propagation and reconstruction
[node.full01]
mode = "full"
database = "goleveldb"
start_at = 0
state_sync = false
retain_blocks = 0
persistent_peers = ["validator01", "validator02", "validator03"]
